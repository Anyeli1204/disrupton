<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üé≠ Prueba de Roles - Disrupt√≥n 2025</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .status-banner {
            padding: 15px;
            text-align: center;
            font-weight: bold;
            font-size: 1.1em;
        }

        .status-banner.connected {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .status-banner.disconnected {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .user-info {
            background: #e3f2fd;
            border: 1px solid #bbdefb;
            border-radius: 8px;
            padding: 15px;
            margin: 20px;
        }

        .user-info h3 {
            color: #1976d2;
            margin-bottom: 10px;
        }

        .user-info p {
            margin: 5px 0;
            font-size: 14px;
        }

        .role-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            color: white;
            margin-left: 10px;
        }

        .role-admin { background: #e74c3c; }
        .role-moderator { background: #f39c12; }
        .role-guide { background: #27ae60; }
        .role-premium { background: #9b59b6; }
        .role-user { background: #3498db; }

        .tabs {
            display: flex;
            background: #f8f9fa;
            border-bottom: 1px solid #dee2e6;
            flex-wrap: wrap;
        }

        .tab {
            flex: 1;
            min-width: 150px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            background: none;
            font-size: 1em;
            font-weight: 500;
        }

        .tab:hover {
            background: #e9ecef;
        }

        .tab.active {
            background: #667eea;
            color: white;
        }

        .tab-content {
            display: none;
            padding: 30px;
        }

        .tab-content.active {
            display: block;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 5px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .btn-admin { background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%); }
        .btn-moderator { background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%); }
        .btn-guide { background: linear-gradient(135deg, #27ae60 0%, #229954 100%); }
        .btn-artisan { background: linear-gradient(135deg, #8b4513 0%, #d2691e 100%); }
        .btn-cultural { background: linear-gradient(135deg, #4a90e2 0%, #357abd 100%); }
        .btn-premium { background: linear-gradient(135deg, #9b59b6 0%, #8e44ad 100%); }
        .btn-user { background: linear-gradient(135deg, #3498db 0%, #2980b9 100%); }

        .response-box {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            max-height: 400px;
            overflow-y: auto;
        }

        .response-box.success {
            background: #d4edda;
            border-color: #c3e6cb;
            color: #155724;
        }

        .response-box.error {
            background: #f8d7da;
            border-color: #f5c6cb;
            color: #721c24;
        }

        .function-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .function-card {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
        }

        .function-card h4 {
            color: #333;
            margin-bottom: 10px;
        }

        .function-card p {
            color: #666;
            font-size: 14px;
            margin-bottom: 15px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        .form-group textarea {
            height: 80px;
            resize: vertical;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üé≠ Prueba de Roles</h1>
            <p>Disrupt√≥n 2025 - Sistema de Roles y Permisos</p>
        </div>

        <div id="statusBanner" class="status-banner">
            üîÑ Verificando conexi√≥n...
        </div>

        <div id="userInfo" class="user-info" style="display: none;">
            <h3>üë§ Informaci√≥n del Usuario</h3>
            <p><strong>User ID:</strong> <span id="userId"></span></p>
            <p><strong>Email:</strong> <span id="userEmail"></span></p>
            <p><strong>Rol:</strong> <span id="userRole"></span></p>
        </div>

                       <div class="tabs">
                   <button class="tab active" onclick="showTab('admin')">üëë Admin</button>
                   <button class="tab" onclick="showTab('moderator')">üõ°Ô∏è Moderador</button>
                   <button class="tab" onclick="showTab('guide')">üó∫Ô∏è Gu√≠a</button>
                   <button class="tab" onclick="showTab('artisan')">üé® Artesano</button>
                   <button class="tab" onclick="showTab('cultural-agent')">üèõÔ∏è Agente Cultural</button>
                   <button class="tab" onclick="showTab('premium')">‚≠ê Premium</button>
                   <button class="tab" onclick="showTab('user')">üë§ Usuario</button>
               </div>

        <!-- Tab Admin -->
        <div id="admin" class="tab-content active">
            <h2>üëë Funciones de Administrador</h2>
            <p>Acceso total al sistema - Gesti√≥n completa de usuarios y contenido</p>
            
            <div class="function-grid">
                <div class="function-card">
                    <h4>üìä Dashboard</h4>
                    <p>Panel de control principal con estad√≠sticas del sistema</p>
                    <button onclick="testAdminFunction('dashboard')" class="btn btn-admin">Ver Dashboard</button>
                </div>
                
                <div class="function-card">
                    <h4>üë• Gesti√≥n de Usuarios</h4>
                    <p>Ver, editar y gestionar todos los usuarios del sistema</p>
                    <button onclick="testAdminFunction('users')" class="btn btn-admin">Ver Usuarios</button>
                </div>
                
                <div class="function-card">
                    <h4>üîÑ Cambiar Roles</h4>
                    <p>Modificar roles y estados de usuarios</p>
                    <div class="form-group">
                        <label>User ID:</label>
                        <input type="text" id="adminUserId" placeholder="Ingresa User ID">
                    </div>
                    <div class="form-group">
                        <label>Nuevo Rol:</label>
                        <select id="adminNewRole">
                            <option value="USER">Usuario</option>
                            <option value="ADMIN">Administrador</option>
                            <option value="MODERATOR">Moderador</option>
                            <option value="GUIDE">Gu√≠a</option>
                            <option value="PREMIUM">Premium</option>
                        </select>
                    </div>
                    <button onclick="testAdminFunction('changeRole')" class="btn btn-admin">Cambiar Rol</button>
                </div>
                
                <div class="function-card">
                    <h4>üìà Estad√≠sticas</h4>
                    <p>Estad√≠sticas detalladas del sistema</p>
                    <button onclick="testAdminFunction('stats')" class="btn btn-admin">Ver Estad√≠sticas</button>
                </div>
            </div>
            
            <div id="adminResponse" class="response-box" style="display: none;"></div>
        </div>

        <!-- Tab Moderador -->
        <div id="moderator" class="tab-content">
            <h2>üõ°Ô∏è Funciones de Moderador</h2>
            <p>Moderaci√≥n de contenido y gesti√≥n de usuarios problem√°ticos</p>
            
            <div class="function-grid">
                <div class="function-card">
                    <h4>üìã Contenido Pendiente</h4>
                    <p>Revisar contenido que requiere moderaci√≥n</p>
                    <button onclick="testModeratorFunction('pending')" class="btn btn-moderator">Ver Pendiente</button>
                </div>
                
                <div class="function-card">
                    <h4>‚úÖ Aprobar Contenido</h4>
                    <p>Aprobar contenido cultural y comentarios</p>
                    <div class="form-group">
                        <label>Content ID:</label>
                        <input type="text" id="modContentId" placeholder="ID del contenido">
                    </div>
                    <div class="form-group">
                        <label>Tipo:</label>
                        <select id="modContentType">
                            <option value="comment">Comentario</option>
                            <option value="cultural">Objeto Cultural</option>
                            <option value="tour">Tour</option>
                        </select>
                    </div>
                    <button onclick="testModeratorFunction('approve')" class="btn btn-moderator">Aprobar</button>
                </div>
                
                <div class="function-card">
                    <h4>‚ùå Rechazar Contenido</h4>
                    <p>Rechazar contenido inapropiado</p>
                    <div class="form-group">
                        <label>Content ID:</label>
                        <input type="text" id="modRejectId" placeholder="ID del contenido">
                    </div>
                    <div class="form-group">
                        <label>Raz√≥n:</label>
                        <textarea id="modRejectReason" placeholder="Raz√≥n del rechazo"></textarea>
                    </div>
                    <button onclick="testModeratorFunction('reject')" class="btn btn-moderator">Rechazar</button>
                </div>
                
                <div class="function-card">
                    <h4>üö® Contenido Reportado</h4>
                    <p>Revisar contenido reportado por usuarios</p>
                    <button onclick="testModeratorFunction('reported')" class="btn btn-moderator">Ver Reportado</button>
                </div>
            </div>
            
            <div id="moderatorResponse" class="response-box" style="display: none;"></div>
        </div>

        <!-- Tab Gu√≠a -->
        <div id="guide" class="tab-content">
            <h2>üó∫Ô∏è Funciones de Gu√≠a Tur√≠stico</h2>
            <p>Gesti√≥n de tours, contenido cultural y rutas personalizadas</p>
            
            <div class="function-grid">
                <div class="function-card">
                    <h4>üó∫Ô∏è Crear Tour</h4>
                    <p>Crear nuevos tours virtuales</p>
                    <div class="form-group">
                        <label>T√≠tulo:</label>
                        <input type="text" id="guideTourTitle" placeholder="T√≠tulo del tour">
                    </div>
                    <div class="form-group">
                        <label>Descripci√≥n:</label>
                        <textarea id="guideTourDesc" placeholder="Descripci√≥n del tour"></textarea>
                    </div>
                    <div class="form-group">
                        <label>Ubicaci√≥n:</label>
                        <input type="text" id="guideTourLocation" placeholder="Ubicaci√≥n">
                    </div>
                    <button onclick="testGuideFunction('createTour')" class="btn btn-guide">Crear Tour</button>
                </div>
                
                <div class="function-card">
                    <h4>üì∏ Subir Contenido</h4>
                    <p>Subir contenido cultural</p>
                    <div class="form-group">
                        <label>T√≠tulo:</label>
                        <input type="text" id="guideContentTitle" placeholder="T√≠tulo del contenido">
                    </div>
                    <div class="form-group">
                        <label>Tipo:</label>
                        <select id="guideContentType">
                            <option value="photo">Foto</option>
                            <option value="video">Video</option>
                            <option value="audio">Audio</option>
                            <option value="text">Texto</option>
                        </select>
                    </div>
                    <button onclick="testGuideFunction('uploadContent')" class="btn btn-guide">Subir</button>
                </div>
                
                <div class="function-card">
                    <h4>üõ§Ô∏è Crear Ruta</h4>
                    <p>Crear rutas personalizadas</p>
                    <div class="form-group">
                        <label>Nombre:</label>
                        <input type="text" id="guideRouteName" placeholder="Nombre de la ruta">
                    </div>
                    <div class="form-group">
                        <label>Paradas:</label>
                        <textarea id="guideRouteStops" placeholder="Paradas separadas por comas"></textarea>
                    </div>
                    <button onclick="testGuideFunction('createRoute')" class="btn btn-guide">Crear Ruta</button>
                </div>
                
                <div class="function-card">
                    <h4>üìä Estad√≠sticas</h4>
                    <p>Ver estad√≠sticas del gu√≠a</p>
                    <button onclick="testGuideFunction('stats')" class="btn btn-guide">Ver Stats</button>
                </div>
            </div>
            
            <div id="guideResponse" class="response-box" style="display: none;"></div>
        </div>

        <!-- Tab Artesano -->
        <div id="artisan" class="tab-content">
            <h2>üé® Funciones de Artesano</h2>
            <p>Gesti√≥n de obras artesanales, exposiciones y talleres</p>
            
            <div class="function-grid">
                <div class="function-card">
                    <h4>üìä Dashboard</h4>
                    <p>Panel de control del artesano</p>
                    <button onclick="testArtisanFunction('dashboard')" class="btn btn-artisan">Ver Dashboard</button>
                </div>
                
                <div class="function-card">
                    <h4>üé® Crear Obra</h4>
                    <p>Crear nueva obra artesanal</p>
                    <div class="form-group">
                        <label>T√≠tulo:</label>
                        <input type="text" id="artisanTitle" placeholder="T√≠tulo de la obra">
                    </div>
                    <div class="form-group">
                        <label>T√©cnica:</label>
                        <select id="artisanTechnique">
                            <option value="Cer√°mica">Cer√°mica</option>
                            <option value="Textil">Textil</option>
                            <option value="Tallado">Tallado</option>
                            <option value="Metalurgia">Metalurgia</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Categor√≠a:</label>
                        <input type="text" id="artisanCategory" placeholder="Categor√≠a">
                    </div>
                    <button onclick="testArtisanFunction('createArtwork')" class="btn btn-artisan">Crear Obra</button>
                </div>
                
                <div class="function-card">
                    <h4>üñºÔ∏è Mis Obras</h4>
                    <p>Ver todas las obras creadas</p>
                    <button onclick="testArtisanFunction('myArtworks')" class="btn btn-artisan">Ver Obras</button>
                </div>
                
                <div class="function-card">
                    <h4>üèõÔ∏è Crear Exposici√≥n</h4>
                    <p>Crear nueva exposici√≥n</p>
                    <div class="form-group">
                        <label>T√≠tulo:</label>
                        <input type="text" id="artisanExhibitionTitle" placeholder="T√≠tulo de la exposici√≥n">
                    </div>
                    <div class="form-group">
                        <label>Ubicaci√≥n:</label>
                        <input type="text" id="artisanExhibitionLocation" placeholder="Ubicaci√≥n">
                    </div>
                    <div class="form-group">
                        <label>Fecha Inicio:</label>
                        <input type="date" id="artisanExhibitionStart">
                    </div>
                    <div class="form-group">
                        <label>Fecha Fin:</label>
                        <input type="date" id="artisanExhibitionEnd">
                    </div>
                    <button onclick="testArtisanFunction('createExhibition')" class="btn btn-artisan">Crear Exposici√≥n</button>
                </div>
                
                <div class="function-card">
                    <h4>üìã Mis Exposiciones</h4>
                    <p>Ver exposiciones creadas</p>
                    <button onclick="testArtisanFunction('myExhibitions')" class="btn btn-artisan">Ver Exposiciones</button>
                </div>
                
                <div class="function-card">
                    <h4>üî® Crear Taller</h4>
                    <p>Crear nuevo taller</p>
                    <div class="form-group">
                        <label>T√≠tulo:</label>
                        <input type="text" id="artisanWorkshopTitle" placeholder="T√≠tulo del taller">
                    </div>
                    <div class="form-group">
                        <label>T√©cnica:</label>
                        <select id="artisanWorkshopTechnique">
                            <option value="Cer√°mica">Cer√°mica</option>
                            <option value="Textil">Textil</option>
                            <option value="Tallado">Tallado</option>
                            <option value="Metalurgia">Metalurgia</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>M√°x. Participantes:</label>
                        <input type="number" id="artisanWorkshopMaxParticipants" min="1" max="50" value="12">
                    </div>
                    <div class="form-group">
                        <label>Precio:</label>
                        <input type="number" id="artisanWorkshopPrice" min="0" step="0.01" placeholder="0.00">
                    </div>
                    <button onclick="testArtisanFunction('createWorkshop')" class="btn btn-artisan">Crear Taller</button>
                </div>
                
                <div class="function-card">
                    <h4>üìö Mis Talleres</h4>
                    <p>Ver talleres creados</p>
                    <button onclick="testArtisanFunction('myWorkshops')" class="btn btn-artisan">Ver Talleres</button>
                </div>
                
                <div class="function-card">
                    <h4>üí∞ Ventas</h4>
                    <p>Estad√≠sticas de ventas</p>
                    <button onclick="testArtisanFunction('sales')" class="btn btn-artisan">Ver Ventas</button>
                </div>
                
                <div class="function-card">
                    <h4>üìà Estad√≠sticas</h4>
                    <p>Estad√≠sticas generales</p>
                    <button onclick="testArtisanFunction('stats')" class="btn btn-artisan">Ver Stats</button>
                </div>
            </div>
            
            <div id="artisanResponse" class="response-box" style="display: none;"></div>
        </div>

        <!-- Tab Agente Cultural -->
        <div id="cultural-agent" class="tab-content">
            <h2>üèõÔ∏è Funciones de Agente Cultural</h2>
            <p>Gesti√≥n de eventos culturales, artistas y espacios culturales</p>
            
            <div class="function-grid">
                <div class="function-card">
                    <h4>üìä Dashboard</h4>
                    <p>Panel de control del agente cultural</p>
                    <button onclick="testCulturalAgentFunction('dashboard')" class="btn btn-cultural">Ver Dashboard</button>
                </div>
                
                <div class="function-card">
                    <h4>üé≠ Crear Evento</h4>
                    <p>Crear nuevo evento cultural</p>
                    <div class="form-group">
                        <label>T√≠tulo:</label>
                        <input type="text" id="culturalEventTitle" placeholder="T√≠tulo del evento">
                    </div>
                    <div class="form-group">
                        <label>Categor√≠a:</label>
                        <select id="culturalEventCategory">
                            <option value="Festival">Festival</option>
                            <option value="Exposici√≥n">Exposici√≥n</option>
                            <option value="Concierto">Concierto</option>
                            <option value="Teatro">Teatro</option>
                            <option value="Danza">Danza</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Ubicaci√≥n:</label>
                        <input type="text" id="culturalEventLocation" placeholder="Ubicaci√≥n">
                    </div>
                    <div class="form-group">
                        <label>Fecha Inicio:</label>
                        <input type="date" id="culturalEventStart">
                    </div>
                    <div class="form-group">
                        <label>Fecha Fin:</label>
                        <input type="date" id="culturalEventEnd">
                    </div>
                    <div class="form-group">
                        <label>Asistencia Esperada:</label>
                        <input type="number" id="culturalEventAttendance" min="1" value="100">
                    </div>
                    <button onclick="testCulturalAgentFunction('createEvent')" class="btn btn-cultural">Crear Evento</button>
                </div>
                
                <div class="function-card">
                    <h4>üìÖ Mis Eventos</h4>
                    <p>Ver eventos creados</p>
                    <button onclick="testCulturalAgentFunction('myEvents')" class="btn btn-cultural">Ver Eventos</button>
                </div>
                
                <div class="function-card">
                    <h4>üë®‚Äçüé® Registrar Artista</h4>
                    <p>Registrar nuevo artista</p>
                    <div class="form-group">
                        <label>Nombre:</label>
                        <input type="text" id="culturalArtistName" placeholder="Nombre del artista">
                    </div>
                    <div class="form-group">
                        <label>Especialidad:</label>
                        <input type="text" id="culturalArtistSpecialty" placeholder="Especialidad">
                    </div>
                    <div class="form-group">
                        <label>Contacto:</label>
                        <input type="text" id="culturalArtistContact" placeholder="Informaci√≥n de contacto">
                    </div>
                    <div class="form-group">
                        <label>Portfolio:</label>
                        <input type="text" id="culturalArtistPortfolio" placeholder="URL del portfolio">
                    </div>
                    <button onclick="testCulturalAgentFunction('registerArtist')" class="btn btn-cultural">Registrar</button>
                </div>
                
                <div class="function-card">
                    <h4>üë• Artistas</h4>
                    <p>Ver artistas registrados</p>
                    <button onclick="testCulturalAgentFunction('artists')" class="btn btn-cultural">Ver Artistas</button>
                </div>
                
                <div class="function-card">
                    <h4>üè¢ Gestionar Espacio</h4>
                    <p>Gestionar espacio cultural</p>
                    <div class="form-group">
                        <label>Nombre:</label>
                        <input type="text" id="culturalSpaceName" placeholder="Nombre del espacio">
                    </div>
                    <div class="form-group">
                        <label>Tipo:</label>
                        <select id="culturalSpaceType">
                            <option value="Centro Cultural">Centro Cultural</option>
                            <option value="Teatro">Teatro</option>
                            <option value="Galer√≠a">Galer√≠a</option>
                            <option value="Museo">Museo</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Ubicaci√≥n:</label>
                        <input type="text" id="culturalSpaceLocation" placeholder="Ubicaci√≥n">
                    </div>
                    <div class="form-group">
                        <label>Capacidad:</label>
                        <input type="number" id="culturalSpaceCapacity" min="1" value="100">
                    </div>
                    <div class="form-group">
                        <label>Instalaciones:</label>
                        <textarea id="culturalSpaceFacilities" placeholder="Instalaciones disponibles"></textarea>
                    </div>
                    <button onclick="testCulturalAgentFunction('manageSpace')" class="btn btn-cultural">Gestionar</button>
                </div>
                
                <div class="function-card">
                    <h4>üèõÔ∏è Espacios</h4>
                    <p>Ver espacios gestionados</p>
                    <button onclick="testCulturalAgentFunction('spaces')" class="btn btn-cultural">Ver Espacios</button>
                </div>
                
                <div class="function-card">
                    <h4>üìã Crear Programa</h4>
                    <p>Crear programa cultural</p>
                    <div class="form-group">
                        <label>T√≠tulo:</label>
                        <input type="text" id="culturalProgramTitle" placeholder="T√≠tulo del programa">
                    </div>
                    <div class="form-group">
                        <label>Audiencia Objetivo:</label>
                        <input type="text" id="culturalProgramAudience" placeholder="Audiencia objetivo">
                    </div>
                    <div class="form-group">
                        <label>Duraci√≥n:</label>
                        <input type="text" id="culturalProgramDuration" placeholder="Duraci√≥n">
                    </div>
                    <div class="form-group">
                        <label>Presupuesto:</label>
                        <input type="number" id="culturalProgramBudget" min="0" step="0.01" placeholder="0.00">
                    </div>
                    <button onclick="testCulturalAgentFunction('createProgram')" class="btn btn-cultural">Crear Programa</button>
                </div>
                
                <div class="function-card">
                    <h4>üìö Programas</h4>
                    <p>Ver programas culturales</p>
                    <button onclick="testCulturalAgentFunction('programs')" class="btn btn-cultural">Ver Programas</button>
                </div>
                
                <div class="function-card">
                    <h4>üì¢ Promoci√≥n</h4>
                    <p>Estad√≠sticas de promoci√≥n</p>
                    <button onclick="testCulturalAgentFunction('promotion')" class="btn btn-cultural">Ver Promoci√≥n</button>
                </div>
                
                <div class="function-card">
                    <h4>üìà Estad√≠sticas</h4>
                    <p>Estad√≠sticas generales</p>
                    <button onclick="testCulturalAgentFunction('stats')" class="btn btn-cultural">Ver Stats</button>
                </div>
            </div>
            
            <div id="cultural-agentResponse" class="response-box" style="display: none;"></div>
        </div>

        <!-- Tab Premium -->
        <div id="premium" class="tab-content">
            <h2>‚≠ê Funciones Premium</h2>
            <p>Acceso exclusivo a contenido y experiencias avanzadas</p>
            
            <div class="function-grid">
                <div class="function-card">
                    <h4>‚≠ê Tours Exclusivos</h4>
                    <p>Acceso a tours VIP y experiencias √∫nicas</p>
                    <button onclick="testPremiumFunction('exclusiveTours')" class="btn btn-premium">Ver Tours</button>
                </div>
                
                <div class="function-card">
                    <h4>üé¨ Contenido Premium</h4>
                    <p>Contenido cultural exclusivo</p>
                    <button onclick="testPremiumFunction('culturalContent')" class="btn btn-premium">Ver Contenido</button>
                </div>
                
                <div class="function-card">
                    <h4>üîÆ AR Avanzado</h4>
                    <p>Experiencias AR inmersivas</p>
                    <button onclick="testPremiumFunction('arExperiences')" class="btn btn-premium">Ver AR</button>
                </div>
                
                <div class="function-card">
                    <h4>üé´ Reservar Exclusivo</h4>
                    <p>Reservar tours exclusivos</p>
                    <div class="form-group">
                        <label>Tour ID:</label>
                        <input type="text" id="premiumTourId" placeholder="ID del tour">
                    </div>
                    <div class="form-group">
                        <label>Fecha:</label>
                        <input type="date" id="premiumTourDate">
                    </div>
                    <div class="form-group">
                        <label>Visitantes:</label>
                        <input type="number" id="premiumVisitors" min="1" max="10" value="1">
                    </div>
                    <button onclick="testPremiumFunction('bookExclusive')" class="btn btn-premium">Reservar</button>
                </div>
            </div>
            
            <div id="premiumResponse" class="response-box" style="display: none;"></div>
        </div>

        <!-- Tab Usuario -->
        <div id="user" class="tab-content">
            <h2>üë§ Funciones de Usuario B√°sico</h2>
            <p>Funciones b√°sicas para usuarios regulares</p>
            
            <div class="function-grid">
                <div class="function-card">
                    <h4>üó∫Ô∏è Tours P√∫blicos</h4>
                    <p>Explorar tours gratuitos disponibles</p>
                    <button onclick="testUserFunction('publicTours')" class="btn btn-user">Ver Tours</button>
                </div>
                
                <div class="function-card">
                    <h4>üìö Contenido B√°sico</h4>
                    <p>Acceso a contenido cultural b√°sico</p>
                    <button onclick="testUserFunction('culturalContent')" class="btn btn-user">Ver Contenido</button>
                </div>
                
                <div class="function-card">
                    <h4>üí¨ Comentar</h4>
                    <p>Agregar comentarios a contenido</p>
                    <div class="form-group">
                        <label>Content ID:</label>
                        <input type="text" id="userContentId" placeholder="ID del contenido">
                    </div>
                    <div class="form-group">
                        <label>Comentario:</label>
                        <textarea id="userComment" placeholder="Tu comentario"></textarea>
                    </div>
                    <button onclick="testUserFunction('comment')" class="btn btn-user">Comentar</button>
                </div>
                
                <div class="function-card">
                    <h4>‚≠ê Actualizar a Premium</h4>
                    <p>Solicitar informaci√≥n de actualizaci√≥n</p>
                    <button onclick="testUserFunction('upgrade')" class="btn btn-user">Solicitar Info</button>
                </div>
            </div>
            
            <div id="userResponse" class="response-box" style="display: none;"></div>
        </div>
    </div>

    <script>
        let currentToken = localStorage.getItem('authToken');
        let currentUserId = localStorage.getItem('userId');
        let currentUserRole = localStorage.getItem('userRole') || 'USER';

        // Verificar conexi√≥n y rol al cargar la p√°gina
        window.onload = function() {
            checkUserAccess();
        };

        function checkUserAccess() {
            if (!currentToken) {
                document.getElementById('statusBanner').textContent = '‚ùå No hay token de autenticaci√≥n';
                document.getElementById('statusBanner').className = 'status-banner disconnected';
                return;
            }

            // Mostrar informaci√≥n del usuario
            document.getElementById('userId').textContent = currentUserId;
            document.getElementById('userEmail').textContent = localStorage.getItem('userEmail') || 'N/A';
            document.getElementById('userRole').textContent = currentUserRole + 
                '<span class="role-badge role-' + currentUserRole.toLowerCase() + '">' + currentUserRole + '</span>';
            document.getElementById('userInfo').style.display = 'block';

            document.getElementById('statusBanner').textContent = '‚úÖ Conectado como ' + currentUserRole;
            document.getElementById('statusBanner').className = 'status-banner connected';
        }

        function showTab(tabName) {
            // Ocultar todos los tabs
            const tabs = document.querySelectorAll('.tab-content');
            tabs.forEach(tab => tab.classList.remove('active'));
            
            // Mostrar el tab seleccionado
            document.getElementById(tabName).classList.add('active');
            
            // Actualizar botones
            const tabButtons = document.querySelectorAll('.tab');
            tabButtons.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
        }

        // Funciones de Admin
        function testAdminFunction(functionName) {
            const responseBox = document.getElementById('adminResponse');
            responseBox.style.display = 'block';
            responseBox.className = 'response-box';
            responseBox.innerHTML = 'üîÑ Probando funci√≥n de admin...';

            let url = '';
            let method = 'GET';
            let body = null;

            switch(functionName) {
                case 'dashboard':
                    url = '/api/admin/dashboard';
                    break;
                case 'users':
                    url = '/api/admin/users';
                    break;
                case 'stats':
                    url = '/api/admin/stats';
                    break;
                case 'changeRole':
                    const userId = document.getElementById('adminUserId').value;
                    const newRole = document.getElementById('adminNewRole').value;
                    if (!userId) {
                        responseBox.className = 'response-box error';
                        responseBox.innerHTML = '‚ùå Error: Ingresa un User ID';
                        return;
                    }
                    url = `/api/admin/users/${userId}/role?newRole=${newRole}`;
                    method = 'PUT';
                    break;
            }

            fetch(url, {
                method: method,
                headers: {
                    'Authorization': 'Bearer ' + currentToken,
                    'Content-Type': 'application/json'
                },
                body: body
            })
            .then(response => {
                if (response.ok) {
                    return response.json();
                } else {
                    throw new Error('Acceso denegado: No tienes permisos de administrador');
                }
            })
            .then(data => {
                responseBox.className = 'response-box success';
                responseBox.innerHTML = '<strong>‚úÖ Funci√≥n de admin ejecutada:</strong><br>' + JSON.stringify(data, null, 2);
            })
            .catch(error => {
                responseBox.className = 'response-box error';
                responseBox.innerHTML = '<strong>‚ùå Error:</strong><br>' + error.message;
            });
        }

        // Funciones de Moderador
        function testModeratorFunction(functionName) {
            const responseBox = document.getElementById('moderatorResponse');
            responseBox.style.display = 'block';
            responseBox.className = 'response-box';
            responseBox.innerHTML = 'üîÑ Probando funci√≥n de moderador...';

            let url = '';
            let method = 'GET';
            let body = null;

            switch(functionName) {
                case 'pending':
                    url = '/api/moderator/pending-content';
                    break;
                case 'reported':
                    url = '/api/moderator/reported';
                    break;
                case 'approve':
                    const contentId = document.getElementById('modContentId').value;
                    const contentType = document.getElementById('modContentType').value;
                    if (!contentId) {
                        responseBox.className = 'response-box error';
                        responseBox.innerHTML = '‚ùå Error: Ingresa un Content ID';
                        return;
                    }
                    url = `/api/moderator/approve/${contentId}?contentType=${contentType}`;
                    method = 'POST';
                    break;
                case 'reject':
                    const rejectId = document.getElementById('modRejectId').value;
                    const reason = document.getElementById('modRejectReason').value;
                    if (!rejectId || !reason) {
                        responseBox.className = 'response-box error';
                        responseBox.innerHTML = '‚ùå Error: Completa todos los campos';
                        return;
                    }
                    url = `/api/moderator/reject/${rejectId}?contentType=comment&reason=${encodeURIComponent(reason)}`;
                    method = 'POST';
                    break;
            }

            fetch(url, {
                method: method,
                headers: {
                    'Authorization': 'Bearer ' + currentToken,
                    'Content-Type': 'application/json'
                },
                body: body
            })
            .then(response => {
                if (response.ok) {
                    return response.json();
                } else {
                    throw new Error('Acceso denegado: No tienes permisos de moderador');
                }
            })
            .then(data => {
                responseBox.className = 'response-box success';
                responseBox.innerHTML = '<strong>‚úÖ Funci√≥n de moderador ejecutada:</strong><br>' + JSON.stringify(data, null, 2);
            })
            .catch(error => {
                responseBox.className = 'response-box error';
                responseBox.innerHTML = '<strong>‚ùå Error:</strong><br>' + error.message;
            });
        }

        // Funciones de Gu√≠a
        function testGuideFunction(functionName) {
            const responseBox = document.getElementById('guideResponse');
            responseBox.style.display = 'block';
            responseBox.className = 'response-box';
            responseBox.innerHTML = 'üîÑ Probando funci√≥n de gu√≠a...';

            let url = '';
            let method = 'GET';
            let body = null;

            switch(functionName) {
                case 'stats':
                    url = '/api/guide/stats';
                    break;
                case 'createTour':
                    const title = document.getElementById('guideTourTitle').value;
                    const description = document.getElementById('guideTourDesc').value;
                    const location = document.getElementById('guideTourLocation').value;
                    if (!title || !description || !location) {
                        responseBox.className = 'response-box error';
                        responseBox.innerHTML = '‚ùå Error: Completa todos los campos';
                        return;
                    }
                    url = `/api/guide/tours?title=${encodeURIComponent(title)}&description=${encodeURIComponent(description)}&location=${encodeURIComponent(location)}`;
                    method = 'POST';
                    break;
                case 'uploadContent':
                    const contentTitle = document.getElementById('guideContentTitle').value;
                    const contentType = document.getElementById('guideContentType').value;
                    if (!contentTitle) {
                        responseBox.className = 'response-box error';
                        responseBox.innerHTML = '‚ùå Error: Ingresa un t√≠tulo';
                        return;
                    }
                    url = `/api/guide/cultural-content?title=${encodeURIComponent(contentTitle)}&description=Contenido cultural&type=${contentType}&location=Centro`;
                    method = 'POST';
                    break;
                case 'createRoute':
                    const routeName = document.getElementById('guideRouteName').value;
                    const stops = document.getElementById('guideRouteStops').value;
                    if (!routeName || !stops) {
                        responseBox.className = 'response-box error';
                        responseBox.innerHTML = '‚ùå Error: Completa todos los campos';
                        return;
                    }
                    url = `/api/guide/routes?name=${encodeURIComponent(routeName)}&description=Ruta personalizada&stops=${encodeURIComponent(stops)}`;
                    method = 'POST';
                    break;
            }

            fetch(url, {
                method: method,
                headers: {
                    'Authorization': 'Bearer ' + currentToken,
                    'Content-Type': 'application/json'
                },
                body: body
            })
            .then(response => {
                if (response.ok) {
                    return response.json();
                } else {
                    throw new Error('Acceso denegado: No tienes permisos de gu√≠a');
                }
            })
            .then(data => {
                responseBox.className = 'response-box success';
                responseBox.innerHTML = '<strong>‚úÖ Funci√≥n de gu√≠a ejecutada:</strong><br>' + JSON.stringify(data, null, 2);
            })
            .catch(error => {
                responseBox.className = 'response-box error';
                responseBox.innerHTML = '<strong>‚ùå Error:</strong><br>' + error.message;
            });
        }

        // Funciones Premium
        function testPremiumFunction(functionName) {
            const responseBox = document.getElementById('premiumResponse');
            responseBox.style.display = 'block';
            responseBox.className = 'response-box';
            responseBox.innerHTML = 'üîÑ Probando funci√≥n premium...';

            let url = '';
            let method = 'GET';
            let body = null;

            switch(functionName) {
                case 'exclusiveTours':
                    url = '/api/premium/exclusive-tours';
                    break;
                case 'culturalContent':
                    url = '/api/premium/cultural-content';
                    break;
                case 'arExperiences':
                    url = '/api/premium/ar-experiences';
                    break;
                case 'bookExclusive':
                    const tourId = document.getElementById('premiumTourId').value;
                    const date = document.getElementById('premiumTourDate').value;
                    const visitors = document.getElementById('premiumVisitors').value;
                    if (!tourId || !date || !visitors) {
                        responseBox.className = 'response-box error';
                        responseBox.innerHTML = '‚ùå Error: Completa todos los campos';
                        return;
                    }
                    url = `/api/premium/book-exclusive/${tourId}?date=${date}&visitors=${visitors}`;
                    method = 'POST';
                    break;
            }

            fetch(url, {
                method: method,
                headers: {
                    'Authorization': 'Bearer ' + currentToken,
                    'Content-Type': 'application/json'
                },
                body: body
            })
            .then(response => {
                if (response.ok) {
                    return response.json();
                } else {
                    throw new Error('Acceso denegado: No tienes permisos premium');
                }
            })
            .then(data => {
                responseBox.className = 'response-box success';
                responseBox.innerHTML = '<strong>‚úÖ Funci√≥n premium ejecutada:</strong><br>' + JSON.stringify(data, null, 2);
            })
            .catch(error => {
                responseBox.className = 'response-box error';
                responseBox.innerHTML = '<strong>‚ùå Error:</strong><br>' + error.message;
            });
        }

        // Funciones de Usuario
        function testUserFunction(functionName) {
            const responseBox = document.getElementById('userResponse');
            responseBox.style.display = 'block';
            responseBox.className = 'response-box';
            responseBox.innerHTML = 'üîÑ Probando funci√≥n de usuario...';

            let url = '';
            let method = 'GET';
            let body = null;

            switch(functionName) {
                case 'publicTours':
                    url = '/api/user/public-tours';
                    break;
                case 'culturalContent':
                    url = '/api/user/cultural-content';
                    break;
                case 'comment':
                    const contentId = document.getElementById('userContentId').value;
                    const comment = document.getElementById('userComment').value;
                    if (!contentId || !comment) {
                        responseBox.className = 'response-box error';
                        responseBox.innerHTML = '‚ùå Error: Completa todos los campos';
                        return;
                    }
                    url = `/api/user/comment?contentId=${contentId}&comment=${encodeURIComponent(comment)}&rating=5`;
                    method = 'POST';
                    break;
                case 'upgrade':
                    url = '/api/user/upgrade-request';
                    method = 'POST';
                    break;
            }

            fetch(url, {
                method: method,
                headers: {
                    'Authorization': 'Bearer ' + currentToken,
                    'Content-Type': 'application/json'
                },
                body: body
            })
            .then(response => {
                if (response.ok) {
                    return response.json();
                } else {
                    throw new Error('Acceso denegado: No tienes permisos de usuario');
                }
            })
            .then(data => {
                responseBox.className = 'response-box success';
                responseBox.innerHTML = '<strong>‚úÖ Funci√≥n de usuario ejecutada:</strong><br>' + JSON.stringify(data, null, 2);
            })
            .catch(error => {
                responseBox.className = 'response-box error';
                responseBox.innerHTML = '<strong>‚ùå Error:</strong><br>' + error.message;
            });
        }

        // Funciones de Artesano
        function testArtisanFunction(functionName) {
            const responseBox = document.getElementById('artisanResponse');
            responseBox.style.display = 'block';
            responseBox.className = 'response-box';
            responseBox.innerHTML = 'üîÑ Probando funci√≥n de artesano...';

            let url = '';
            let method = 'GET';
            let body = null;

            switch(functionName) {
                case 'dashboard':
                    url = '/api/artisan/dashboard';
                    break;
                case 'createArtwork':
                    const title = document.getElementById('artisanTitle').value;
                    const technique = document.getElementById('artisanTechnique').value;
                    const category = document.getElementById('artisanCategory').value;
                    if (!title || !technique || !category) {
                        responseBox.className = 'response-box error';
                        responseBox.innerHTML = '‚ùå Error: Completa todos los campos';
                        return;
                    }
                    url = `/api/artisan/artworks?title=${encodeURIComponent(title)}&description=Obra artesanal&technique=${technique}&category=${category}`;
                    method = 'POST';
                    break;
                case 'myArtworks':
                    url = '/api/artisan/artworks';
                    break;
                case 'createExhibition':
                    const exhibitionTitle = document.getElementById('artisanExhibitionTitle').value;
                    const location = document.getElementById('artisanExhibitionLocation').value;
                    const startDate = document.getElementById('artisanExhibitionStart').value;
                    const endDate = document.getElementById('artisanExhibitionEnd').value;
                    if (!exhibitionTitle || !location || !startDate || !endDate) {
                        responseBox.className = 'response-box error';
                        responseBox.innerHTML = '‚ùå Error: Completa todos los campos';
                        return;
                    }
                    url = `/api/artisan/exhibitions?title=${encodeURIComponent(exhibitionTitle)}&description=Exposici√≥n artesanal&location=${encodeURIComponent(location)}&startDate=${startDate}&endDate=${endDate}`;
                    method = 'POST';
                    break;
                case 'myExhibitions':
                    url = '/api/artisan/exhibitions';
                    break;
                case 'createWorkshop':
                    const workshopTitle = document.getElementById('artisanWorkshopTitle').value;
                    const workshopTechnique = document.getElementById('artisanWorkshopTechnique').value;
                    const maxParticipants = document.getElementById('artisanWorkshopMaxParticipants').value;
                    const price = document.getElementById('artisanWorkshopPrice').value;
                    if (!workshopTitle || !workshopTechnique || !maxParticipants || !price) {
                        responseBox.className = 'response-box error';
                        responseBox.innerHTML = '‚ùå Error: Completa todos los campos';
                        return;
                    }
                    url = `/api/artisan/workshops?title=${encodeURIComponent(workshopTitle)}&description=Taller artesanal&technique=${workshopTechnique}&maxParticipants=${maxParticipants}&price=${price}`;
                    method = 'POST';
                    break;
                case 'myWorkshops':
                    url = '/api/artisan/workshops';
                    break;
                case 'sales':
                    url = '/api/artisan/sales';
                    break;
                case 'stats':
                    url = '/api/artisan/stats';
                    break;
            }

            fetch(url, {
                method: method,
                headers: {
                    'Authorization': 'Bearer ' + currentToken,
                    'Content-Type': 'application/json'
                },
                body: body
            })
            .then(response => {
                if (response.ok) {
                    return response.json();
                } else {
                    throw new Error('Acceso denegado: No tienes permisos de artesano');
                }
            })
            .then(data => {
                responseBox.className = 'response-box success';
                responseBox.innerHTML = '<strong>‚úÖ Funci√≥n de artesano ejecutada:</strong><br>' + JSON.stringify(data, null, 2);
            })
            .catch(error => {
                responseBox.className = 'response-box error';
                responseBox.innerHTML = '<strong>‚ùå Error:</strong><br>' + error.message;
            });
        }

        // Funciones de Agente Cultural
        function testCulturalAgentFunction(functionName) {
            const responseBox = document.getElementById('cultural-agentResponse');
            responseBox.style.display = 'block';
            responseBox.className = 'response-box';
            responseBox.innerHTML = 'üîÑ Probando funci√≥n de agente cultural...';

            let url = '';
            let method = 'GET';
            let body = null;

            switch(functionName) {
                case 'dashboard':
                    url = '/api/cultural-agent/dashboard';
                    break;
                case 'createEvent':
                    const eventTitle = document.getElementById('culturalEventTitle').value;
                    const category = document.getElementById('culturalEventCategory').value;
                    const eventLocation = document.getElementById('culturalEventLocation').value;
                    const eventStart = document.getElementById('culturalEventStart').value;
                    const eventEnd = document.getElementById('culturalEventEnd').value;
                    const attendance = document.getElementById('culturalEventAttendance').value;
                    if (!eventTitle || !category || !eventLocation || !eventStart || !eventEnd || !attendance) {
                        responseBox.className = 'response-box error';
                        responseBox.innerHTML = '‚ùå Error: Completa todos los campos';
                        return;
                    }
                    url = `/api/cultural-agent/events?title=${encodeURIComponent(eventTitle)}&description=Evento cultural&category=${category}&location=${encodeURIComponent(eventLocation)}&startDate=${eventStart}&endDate=${eventEnd}&expectedAttendance=${attendance}`;
                    method = 'POST';
                    break;
                case 'myEvents':
                    url = '/api/cultural-agent/events';
                    break;
                case 'registerArtist':
                    const artistName = document.getElementById('culturalArtistName').value;
                    const specialty = document.getElementById('culturalArtistSpecialty').value;
                    const contact = document.getElementById('culturalArtistContact').value;
                    const portfolio = document.getElementById('culturalArtistPortfolio').value;
                    if (!artistName || !specialty || !contact || !portfolio) {
                        responseBox.className = 'response-box error';
                        responseBox.innerHTML = '‚ùå Error: Completa todos los campos';
                        return;
                    }
                    url = `/api/cultural-agent/artists?name=${encodeURIComponent(artistName)}&specialty=${encodeURIComponent(specialty)}&contactInfo=${encodeURIComponent(contact)}&portfolio=${encodeURIComponent(portfolio)}`;
                    method = 'POST';
                    break;
                case 'artists':
                    url = '/api/cultural-agent/artists';
                    break;
                case 'manageSpace':
                    const spaceName = document.getElementById('culturalSpaceName').value;
                    const spaceType = document.getElementById('culturalSpaceType').value;
                    const spaceLocation = document.getElementById('culturalSpaceLocation').value;
                    const capacity = document.getElementById('culturalSpaceCapacity').value;
                    const facilities = document.getElementById('culturalSpaceFacilities').value;
                    if (!spaceName || !spaceType || !spaceLocation || !capacity || !facilities) {
                        responseBox.className = 'response-box error';
                        responseBox.innerHTML = '‚ùå Error: Completa todos los campos';
                        return;
                    }
                    url = `/api/cultural-agent/spaces?name=${encodeURIComponent(spaceName)}&type=${spaceType}&location=${encodeURIComponent(spaceLocation)}&capacity=${capacity}&facilities=${encodeURIComponent(facilities)}`;
                    method = 'POST';
                    break;
                case 'spaces':
                    url = '/api/cultural-agent/spaces';
                    break;
                case 'createProgram':
                    const programTitle = document.getElementById('culturalProgramTitle').value;
                    const audience = document.getElementById('culturalProgramAudience').value;
                    const duration = document.getElementById('culturalProgramDuration').value;
                    const budget = document.getElementById('culturalProgramBudget').value;
                    if (!programTitle || !audience || !duration || !budget) {
                        responseBox.className = 'response-box error';
                        responseBox.innerHTML = '‚ùå Error: Completa todos los campos';
                        return;
                    }
                    url = `/api/cultural-agent/programs?title=${encodeURIComponent(programTitle)}&description=Programa cultural&targetAudience=${encodeURIComponent(audience)}&duration=${encodeURIComponent(duration)}&budget=${budget}`;
                    method = 'POST';
                    break;
                case 'programs':
                    url = '/api/cultural-agent/programs';
                    break;
                case 'promotion':
                    url = '/api/cultural-agent/promotion';
                    break;
                case 'stats':
                    url = '/api/cultural-agent/stats';
                    break;
            }

            fetch(url, {
                method: method,
                headers: {
                    'Authorization': 'Bearer ' + currentToken,
                    'Content-Type': 'application/json'
                },
                body: body
            })
            .then(response => {
                if (response.ok) {
                    return response.json();
                } else {
                    throw new Error('Acceso denegado: No tienes permisos de agente cultural');
                }
            })
            .then(data => {
                responseBox.className = 'response-box success';
                responseBox.innerHTML = '<strong>‚úÖ Funci√≥n de agente cultural ejecutada:</strong><br>' + JSON.stringify(data, null, 2);
            })
            .catch(error => {
                responseBox.className = 'response-box error';
                responseBox.innerHTML = '<strong>‚ùå Error:</strong><br>' + error.message;
            });
        }
    </script>
</body>
</html>
